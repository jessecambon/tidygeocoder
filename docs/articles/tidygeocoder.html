<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to tidygeocoder • tidygeocoder</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Introduction to tidygeocoder">
<meta property="og:description" content="Start here if this is your first time using tidygeocder.
">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tidygeocoder</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/tidygeocoder.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/jessecambon/tidygeocoder/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="tidygeocoder_files/header-attrs-2.6/header-attrs.js"></script><script src="tidygeocoder_files/accessible-code-block-0.0.1/empty-anchor.js"></script><script src="tidygeocoder_files/htmlwidgets-1.5.3/htmlwidgets.js"></script><script src="tidygeocoder_files/jquery-1.12.4/jquery.min.js"></script><link href="tidygeocoder_files/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="tidygeocoder_files/datatables-binding-0.16/datatables.js"></script><link href="tidygeocoder_files/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="tidygeocoder_files/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="tidygeocoder_files/dt-core-1.10.20/js/jquery.dataTables.min.js"></script><link href="tidygeocoder_files/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet">
<script src="tidygeocoder_files/nouislider-7.0.10/jquery.nouislider.min.js"></script><link href="tidygeocoder_files/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet">
<script src="tidygeocoder_files/selectize-0.12.0/selectize.min.js"></script><link href="tidygeocoder_files/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet">
<script src="tidygeocoder_files/crosstalk-1.1.0.1/js/crosstalk.min.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Introduction to tidygeocoder</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/jessecambon/tidygeocoder/blob/master/vignettes/tidygeocoder.Rmd"><code>vignettes/tidygeocoder.Rmd</code></a></small>
      <div class="hidden name"><code>tidygeocoder.Rmd</code></div>

    </div>

    
    
<p>Geocoding services are used to provide data about locations such as longitude and latitude coordinates. The goal of tidygeocoder is to make getting data from these services easy. The two main functions to use are <code><a href="../reference/geocode.html">geocode()</a></code> which takes a dataframe as an input and <code><a href="../reference/geo.html">geo()</a></code> which takes character values as inputs.</p>
<p>The <code><a href="../reference/geocode.html">geocode()</a></code> function extracts specified address columns from the input dataframe and passes them to <code><a href="../reference/geo.html">geo()</a></code> to perform geocoding. All extra arguments (<code>...</code>) given to <code><a href="../reference/geocode.html">geocode()</a></code> are passed to <code><a href="../reference/geo.html">geo()</a></code> so refer to the documentation in <code><a href="../reference/geo.html">geo()</a></code> for all the possible arguments you can give to the <code><a href="../reference/geocode.html">geocode()</a></code> function.</p>
<div id="basic-queries" class="section level2">
<h2 class="hasAnchor">
<a href="#basic-queries" class="anchor"></a>Basic Queries</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/">tibble</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/rstudio/DT">DT</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://jessecambon.github.io/tidygeocoder/">tidygeocoder</a></span><span class="op">)</span>

<span class="va">address_single</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>singlelineaddress <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'11 Wall St, NY, NY'</span>, 
                    <span class="st">'600 Peachtree Street NE, Atlanta, Georgia'</span><span class="op">)</span><span class="op">)</span>
<span class="va">address_components</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html">tribble</a></span><span class="op">(</span>
  <span class="op">~</span><span class="va">street</span>                      , <span class="op">~</span><span class="va">cty</span>,               <span class="op">~</span><span class="va">st</span>,
  <span class="st">'11 Wall St'</span>,                  <span class="st">'NY'</span>,               <span class="st">'NY'</span>,
  <span class="st">'600 Peachtree Street NE'</span>,     <span class="st">'Atlanta'</span>,          <span class="st">'GA'</span>
<span class="op">)</span></code></pre></div>
<p>You can use the <code>address</code> argument to specify single-line addresses. Note that when multiple addresses are provided, the batch geocoding functionality of the Census geocoder service is used. Additionally, <code>verbose = TRUE</code> displays logs to the console.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">address_single</span> <span class="op">%&gt;%</span> <span class="fu"><a href="../reference/geocode.html">geocode</a></span><span class="op">(</span>address <span class="op">=</span> <span class="va">singlelineaddress</span>, method <span class="op">=</span> <span class="st">'census'</span>,
                           verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="co">#&gt; Number of Unique Addresses: 2</span>
<span class="co">#&gt; Passing 2 addresses to the census batch geocoder</span>
<span class="co">#&gt; Querying API URL: https://geocoding.geo.census.gov/geocoder/locations/addressbatch</span>
<span class="co">#&gt; Passing the following parameters to the API:</span>
<span class="co">#&gt; format : "json"</span>
<span class="co">#&gt; benchmark : "Public_AR_Current"</span>
<span class="co">#&gt; vintage : "Current_Current"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Query completed in: 1.5 seconds</span>
<span class="co">#&gt; # A tibble: 2 x 3</span>
<span class="co">#&gt;   singlelineaddress                           lat  long</span>
<span class="co">#&gt;   &lt;chr&gt;                                     &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1 11 Wall St, NY, NY                         40.7 -74.0</span>
<span class="co">#&gt; 2 600 Peachtree Street NE, Atlanta, Georgia  33.8 -84.4</span></code></pre></div>
<p>Alternatively you can run the same query with the <code><a href="../reference/geo.html">geo()</a></code> function by passing the address values from the dataframe directly. In either <code><a href="../reference/geo.html">geo()</a></code> or <code><a href="../reference/geocode.html">geocode()</a></code>, the <code>lat</code> and <code>long</code> arguments are used to name the resulting latitude and longitude fields. Here the <code>method</code> argument is used to specify the OSM (Nominatim) geocoder service. Refer to the <code><a href="../reference/geo.html">geo()</a></code> function documentation for the possible values of the <code>method</code> argument.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/geo.html">geo</a></span><span class="op">(</span>address <span class="op">=</span> <span class="va">address_single</span><span class="op">$</span><span class="va">singlelineaddress</span>, method <span class="op">=</span> <span class="st">'osm'</span>, 
    lat <span class="op">=</span> <span class="va">latitude</span>, long <span class="op">=</span> <span class="va">longitude</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 2 x 3</span>
<span class="co">#&gt;   address                                   latitude longitude</span>
<span class="co">#&gt;   &lt;chr&gt;                                        &lt;dbl&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt; 1 11 Wall St, NY, NY                            40.7     -74.0</span>
<span class="co">#&gt; 2 600 Peachtree Street NE, Atlanta, Georgia     33.8     -84.4</span></code></pre></div>
<p>Instead of single-line addresses, you can use any combination of the following arguments to specify your addresses: <code>street</code>, <code>city</code>, <code>state</code>, <code>county</code>, <code>postalcode</code>, and <code>country</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">address_components</span> <span class="op">%&gt;%</span> <span class="fu"><a href="../reference/geocode.html">geocode</a></span><span class="op">(</span>street <span class="op">=</span> <span class="va">street</span>, city <span class="op">=</span> <span class="va">cty</span>, state <span class="op">=</span> <span class="va">st</span>,
                               method <span class="op">=</span> <span class="st">'census'</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 2 x 5</span>
<span class="co">#&gt;   street                  cty     st      lat  long</span>
<span class="co">#&gt;   &lt;chr&gt;                   &lt;chr&gt;   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1 11 Wall St              NY      NY     40.7 -74.0</span>
<span class="co">#&gt; 2 600 Peachtree Street NE Atlanta GA     33.8 -84.4</span></code></pre></div>
<p>The <code>cascade</code> method first tries to use one geocoder service and then again attempts to geocode addresses that were not found using a second geocoder service. By default it first uses the Census Geocoder and then OSM, but you can specify any two methods you want (in order) with the <code>cascade_order</code> argument.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">addr_comp1</span> <span class="op">&lt;-</span> <span class="va">address_components</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_rows</a></span><span class="op">(</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>cty <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Toronto'</span>, <span class="st">'Tokyo'</span><span class="op">)</span>, country <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Canada'</span>, <span class="st">'Japan'</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>

<span class="va">addr_comp1</span> <span class="op">%&gt;%</span> <span class="fu"><a href="../reference/geocode.html">geocode</a></span><span class="op">(</span>street <span class="op">=</span> <span class="va">street</span>, state <span class="op">=</span> <span class="va">st</span>, city <span class="op">=</span> <span class="va">cty</span>,
                       country <span class="op">=</span> <span class="va">country</span>, method <span class="op">=</span> <span class="st">'cascade'</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 4 x 7</span>
<span class="co">#&gt;   street                  cty     st    country   lat  long geo_method</span>
<span class="co">#&gt;   &lt;chr&gt;                   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;     </span>
<span class="co">#&gt; 1 11 Wall St              NY      NY    &lt;NA&gt;     40.7 -74.0 census    </span>
<span class="co">#&gt; 2 600 Peachtree Street NE Atlanta GA    &lt;NA&gt;     33.8 -84.4 census    </span>
<span class="co">#&gt; 3 &lt;NA&gt;                    Toronto &lt;NA&gt;  Canada   43.6 -79.4 osm       </span>
<span class="co">#&gt; 4 &lt;NA&gt;                    Tokyo   &lt;NA&gt;  Japan    35.7 139.  osm</span></code></pre></div>
</div>
<div id="beyond-latitude-and-longitude" class="section level2">
<h2 class="hasAnchor">
<a href="#beyond-latitude-and-longitude" class="anchor"></a>Beyond Latitude and Longitude</h2>
<p>To return more data than just the latitude and longitude coordinates, specify <code>full_results = TRUE</code>. Additionally, for the Census geocoder you can get fields for geographies such as Census tracts by specifying <code>return_type = 'geographies'</code>. Be sure to use <code>full_results = TRUE</code> with <code>return_type = 'geographies'</code> in order to allow the Census geography columns to be returned.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">census_full1</span> <span class="op">&lt;-</span> <span class="va">address_single</span> <span class="op">%&gt;%</span> <span class="fu"><a href="../reference/geocode.html">geocode</a></span><span class="op">(</span>address <span class="op">=</span> <span class="va">singlelineaddress</span>, 
      method <span class="op">=</span> <span class="st">'census'</span>, full_results <span class="op">=</span> <span class="cn">TRUE</span>, return_type <span class="op">=</span> <span class="st">'geographies'</span><span class="op">)</span>
<span class="fu"><a href="https://tibble.tidyverse.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">census_full1</span><span class="op">)</span>
<span class="co">#&gt; Rows: 2</span>
<span class="co">#&gt; Columns: 14</span>
<span class="co">#&gt; $ singlelineaddress &lt;chr&gt; "11 Wall St, NY, NY", "600 Peachtree Street NE, Atl…</span>
<span class="co">#&gt; $ lat               &lt;dbl&gt; 40.70747, 33.77085</span>
<span class="co">#&gt; $ long              &lt;dbl&gt; -74.01122, -84.38505</span>
<span class="co">#&gt; $ id                &lt;int&gt; 1, 2</span>
<span class="co">#&gt; $ input_address     &lt;chr&gt; "11 Wall St, NY, NY, , , ", "600 Peachtree Street N…</span>
<span class="co">#&gt; $ match_indicator   &lt;chr&gt; "Match", "Match"</span>
<span class="co">#&gt; $ match_type        &lt;chr&gt; "Exact", "Non_Exact"</span>
<span class="co">#&gt; $ matched_address   &lt;chr&gt; "11 WALL ST, NEW YORK, NY, 10005", "600 PEACHTREE S…</span>
<span class="co">#&gt; $ tiger_line_id     &lt;chr&gt; "59659656", "17343689"</span>
<span class="co">#&gt; $ tiger_side        &lt;chr&gt; "R", "L"</span>
<span class="co">#&gt; $ state_fips        &lt;chr&gt; "36", "13"</span>
<span class="co">#&gt; $ county_fips       &lt;chr&gt; "061", "121"</span>
<span class="co">#&gt; $ census_tract      &lt;chr&gt; "000700", "001902"</span>
<span class="co">#&gt; $ census_block      &lt;chr&gt; "1004", "2003"</span></code></pre></div>
<p>As mentioned earlier, the <code><a href="../reference/geocode.html">geocode()</a></code> function passes addresses in dataframes to the <code><a href="../reference/geo.html">geo()</a></code> function for geocoding so we can also directly use <code><a href="../reference/geo.html">geo()</a></code> function in a similar way:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">salz</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/geo.html">geo</a></span><span class="op">(</span><span class="st">'Salzburg, Austria'</span>, method <span class="op">=</span> <span class="st">'osm'</span>, full_results <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="fu"><a href="https://tibble.tidyverse.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">salz</span><span class="op">)</span>
<span class="co">#&gt; Rows: 1</span>
<span class="co">#&gt; Columns: 13</span>
<span class="co">#&gt; $ address      &lt;chr&gt; "Salzburg, Austria"</span>
<span class="co">#&gt; $ lat          &lt;dbl&gt; 47.79813</span>
<span class="co">#&gt; $ long         &lt;dbl&gt; 13.04648</span>
<span class="co">#&gt; $ place_id     &lt;int&gt; 257918086</span>
<span class="co">#&gt; $ licence      &lt;chr&gt; "Data © OpenStreetMap contributors, ODbL 1.0. https://os…</span>
<span class="co">#&gt; $ osm_type     &lt;chr&gt; "relation"</span>
<span class="co">#&gt; $ osm_id       &lt;int&gt; 86538</span>
<span class="co">#&gt; $ boundingbox  &lt;list&gt; [&lt;"47.7512115", "47.8543925", "12.9856478", "13.1272842…</span>
<span class="co">#&gt; $ display_name &lt;chr&gt; "Salzburg, 5020, Österreich"</span>
<span class="co">#&gt; $ class        &lt;chr&gt; "boundary"</span>
<span class="co">#&gt; $ type         &lt;chr&gt; "administrative"</span>
<span class="co">#&gt; $ importance   &lt;dbl&gt; 0.6854709</span>
<span class="co">#&gt; $ icon         &lt;chr&gt; "https://nominatim.openstreetmap.org/ui/mapicons//poi_bo…</span></code></pre></div>
</div>
<div id="working-with-messy-data" class="section level2">
<h2 class="hasAnchor">
<a href="#working-with-messy-data" class="anchor"></a>Working With Messy Data</h2>
<p>Only unique addresses are passed to geocoder services even if your data contains duplicates. Missing/NA and blank addresses are excluded from queries.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">duplicate_addrs</span> <span class="op">&lt;-</span> <span class="va">address_single</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_rows</a></span><span class="op">(</span><span class="va">address_single</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_rows</a></span><span class="op">(</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>singlelineaddress <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>

<span class="va">duplicates_geocoded</span> <span class="op">&lt;-</span> <span class="va">duplicate_addrs</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/geocode.html">geocode</a></span><span class="op">(</span><span class="va">singlelineaddress</span>, verbose <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>
<span class="co">#&gt; Number of Unique Addresses: 2</span>
<span class="co">#&gt; Passing 2 addresses to the census batch geocoder</span>
<span class="co">#&gt; Querying API URL: https://geocoding.geo.census.gov/geocoder/locations/addressbatch</span>
<span class="co">#&gt; Passing the following parameters to the API:</span>
<span class="co">#&gt; format : "json"</span>
<span class="co">#&gt; benchmark : "Public_AR_Current"</span>
<span class="co">#&gt; vintage : "Current_Current"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Query completed in: 0.9 seconds</span>

<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="va">duplicates_geocoded</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">singlelineaddress</th>
<th align="right">lat</th>
<th align="right">long</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">11 Wall St, NY, NY</td>
<td align="right">40.70747</td>
<td align="right">-74.01122</td>
</tr>
<tr class="even">
<td align="left">600 Peachtree Street NE, Atlanta, Georgia</td>
<td align="right">33.77085</td>
<td align="right">-84.38505</td>
</tr>
<tr class="odd">
<td align="left">11 Wall St, NY, NY</td>
<td align="right">40.70747</td>
<td align="right">-74.01122</td>
</tr>
<tr class="even">
<td align="left">600 Peachtree Street NE, Atlanta, Georgia</td>
<td align="right">33.77085</td>
<td align="right">-84.38505</td>
</tr>
<tr class="odd">
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
</tbody>
</table>
<p>As shown above, duplicates will not be removed from your results by default. However, you can return only unique results by using <code>unique_only = TRUE</code>. Note that passing <code>unique_only = TRUE</code> to <code><a href="../reference/geocode.html">geocode()</a></code> will result in the original dataframe format (including column names) to be discarded in favor of the standard field names (ie. “address”, “city”, “state”, etc.).</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">duplicate_addrs</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/geocode.html">geocode</a></span><span class="op">(</span><span class="va">singlelineaddress</span>, unique_only <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 2 x 3</span>
<span class="co">#&gt;   address                                     lat  long</span>
<span class="co">#&gt;   &lt;chr&gt;                                     &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1 11 Wall St, NY, NY                         40.7 -74.0</span>
<span class="co">#&gt; 2 600 Peachtree Street NE, Atlanta, Georgia  33.8 -84.4</span></code></pre></div>
</div>
<div id="advanced-usage" class="section level2">
<h2 class="hasAnchor">
<a href="#advanced-usage" class="anchor"></a>Advanced Usage</h2>
<p>The <code>limit</code> argument can be specified to return multiple matches per address if available:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">geo_limit</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/geo.html">geo</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Lima, Peru'</span>, <span class="st">'Cairo, Egypt'</span><span class="op">)</span>, method <span class="op">=</span> <span class="st">'osm'</span>, 
    limit <span class="op">=</span> <span class="fl">3</span>, full_results <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="fu"><a href="https://tibble.tidyverse.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">geo_limit</span><span class="op">)</span>
<span class="co">#&gt; Rows: 5</span>
<span class="co">#&gt; Columns: 13</span>
<span class="co">#&gt; $ address      &lt;chr&gt; "Lima, Peru", "Lima, Peru", "Lima, Peru", "Cairo, Egypt"…</span>
<span class="co">#&gt; $ lat          &lt;dbl&gt; -12.06211, -12.20011, -11.99997, 30.04439, 30.03325</span>
<span class="co">#&gt; $ long         &lt;dbl&gt; -77.03653, -76.28506, -76.83322, 31.23573, 31.56216</span>
<span class="co">#&gt; $ place_id     &lt;int&gt; 258244064, 258655931, 258306819, 258758158, 298971141</span>
<span class="co">#&gt; $ licence      &lt;chr&gt; "Data © OpenStreetMap contributors, ODbL 1.0. https://os…</span>
<span class="co">#&gt; $ osm_type     &lt;chr&gt; "relation", "relation", "relation", "relation", "relatio…</span>
<span class="co">#&gt; $ osm_id       &lt;int&gt; 1944756, 1944659, 1944670, 5466227, 4103336</span>
<span class="co">#&gt; $ boundingbox  &lt;list&gt; [&lt;"-12.0797663", "-12.0303496", "-77.0884555", "-77.001…</span>
<span class="co">#&gt; $ display_name &lt;chr&gt; "Lima, Perú", "Lima, Perú", "Lima, Perú", "القاهرة, محاف…</span>
<span class="co">#&gt; $ class        &lt;chr&gt; "boundary", "boundary", "boundary", "place", "boundary"</span>
<span class="co">#&gt; $ type         &lt;chr&gt; "administrative", "administrative", "administrative", "c…</span>
<span class="co">#&gt; $ importance   &lt;dbl&gt; 0.7830015, 0.6119761, 0.5934835, 0.6960286, 0.4835559</span>
<span class="co">#&gt; $ icon         &lt;chr&gt; "https://nominatim.openstreetmap.org/ui/mapicons//poi_bo…</span></code></pre></div>
<p>To directly specify specific API parameters for a given <code>method</code> you can use the <code>custom_query</code> parameter. For example, <a href="https://nominatim.org/release-docs/develop/api/Details/#parameters">the Nominatim (OSM) geocoder has a ‘polygon_geojson’ argument</a> that can be used to return GeoJSON geometry content. To pass this parameter you can insert it with a named list using the <code>custom_query</code> argument:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cairo_geo</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/geo.html">geo</a></span><span class="op">(</span><span class="st">'Cairo, Egypt'</span>, method <span class="op">=</span> <span class="st">'osm'</span>, full_results <span class="op">=</span> <span class="cn">TRUE</span>,
    custom_query <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>polygon_geojson <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="co">#&gt; Number of Unique Addresses: 1</span>
<span class="co">#&gt; Querying API URL: http://nominatim.openstreetmap.org/search</span>
<span class="co">#&gt; Passing the following parameters to the API:</span>
<span class="co">#&gt; q : "Cairo, Egypt"</span>
<span class="co">#&gt; limit : "1"</span>
<span class="co">#&gt; polygon_geojson : "1"</span>
<span class="co">#&gt; format : "json"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Query completed in: 0.4 seconds</span>
<span class="co">#&gt; Total query time (including sleep): 1 seconds</span>
<span class="co">#&gt; </span>
<span class="fu"><a href="https://tibble.tidyverse.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">cairo_geo</span><span class="op">)</span>
<span class="co">#&gt; Rows: 1</span>
<span class="co">#&gt; Columns: 15</span>
<span class="co">#&gt; $ address             &lt;chr&gt; "Cairo, Egypt"</span>
<span class="co">#&gt; $ lat                 &lt;dbl&gt; 30.04439</span>
<span class="co">#&gt; $ long                &lt;dbl&gt; 31.23573</span>
<span class="co">#&gt; $ place_id            &lt;int&gt; 258758158</span>
<span class="co">#&gt; $ licence             &lt;chr&gt; "Data © OpenStreetMap contributors, ODbL 1.0. htt…</span>
<span class="co">#&gt; $ osm_type            &lt;chr&gt; "relation"</span>
<span class="co">#&gt; $ osm_id              &lt;int&gt; 5466227</span>
<span class="co">#&gt; $ boundingbox         &lt;list&gt; [&lt;"29.7483062", "30.3209168", "31.2200331", "31.…</span>
<span class="co">#&gt; $ display_name        &lt;chr&gt; "القاهرة, محافظة القاهرة, مصر"</span>
<span class="co">#&gt; $ class               &lt;chr&gt; "place"</span>
<span class="co">#&gt; $ type                &lt;chr&gt; "city"</span>
<span class="co">#&gt; $ importance          &lt;dbl&gt; 0.6960286</span>
<span class="co">#&gt; $ icon                &lt;chr&gt; "https://nominatim.openstreetmap.org/ui/mapicons/…</span>
<span class="co">#&gt; $ geojson.type        &lt;chr&gt; "Polygon"</span>
<span class="co">#&gt; $ geojson.coordinates &lt;list&gt; [&lt;array[1 x 119 x 2]&gt;]</span></code></pre></div>
<p>To test a query without sending any data to a geocoder service, you can use <code>no_query = TRUE</code> (NA results are returned).</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/geo.html">geo</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Vancouver, Canada'</span>, <span class="st">'Las Vegas, NV'</span><span class="op">)</span>, no_query <span class="op">=</span> <span class="cn">TRUE</span>, 
    method <span class="op">=</span> <span class="st">'osm'</span><span class="op">)</span>
<span class="co">#&gt; Number of Unique Addresses: 2</span>
<span class="co">#&gt; Executing single address geocoding...</span>
<span class="co">#&gt; Number of Unique Addresses: 1</span>
<span class="co">#&gt; Querying API URL: http://nominatim.openstreetmap.org/search</span>
<span class="co">#&gt; Passing the following parameters to the API:</span>
<span class="co">#&gt; q : "Vancouver, Canada"</span>
<span class="co">#&gt; limit : "1"</span>
<span class="co">#&gt; format : "json"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Number of Unique Addresses: 1</span>
<span class="co">#&gt; Querying API URL: http://nominatim.openstreetmap.org/search</span>
<span class="co">#&gt; Passing the following parameters to the API:</span>
<span class="co">#&gt; q : "Las Vegas, NV"</span>
<span class="co">#&gt; limit : "1"</span>
<span class="co">#&gt; format : "json"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; # A tibble: 2 x 3</span>
<span class="co">#&gt;   address             lat  long</span>
<span class="co">#&gt;   &lt;chr&gt;             &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Vancouver, Canada    NA    NA</span>
<span class="co">#&gt; 2 Las Vegas, NV        NA    NA</span></code></pre></div>
<p>Here are some additional usage notes for the <code><a href="../reference/geocode.html">geocode()</a></code> and <code><a href="../reference/geo.html">geo()</a></code> functions:</p>
<ul>
<li>To specify a custom geocoder API URL, use the <code>api_url</code> argument. Alternatively, the <code>iq_region</code> and <code>geocodio_v</code> arguments are helper functions for customizing the API URL.</li>
<li>The <code>min_time</code> argument defaults to 1 second for Nominatim (OSM) and Location IQ to abide by usage limits. If you are using a local Nominatim server or have commercial Location IQ plan that has less restrictive usage limits, you can manually set <code>min_time</code> to 0 or a lower value.</li>
<li>By default batch geocoding will be used if available when more than one address is passed, otherwise single address geocoding will be used. To override this default, use the <code>mode</code> argument.</li>
</ul>
</div>
<div id="api-reference" class="section level2">
<h2 class="hasAnchor">
<a href="#api-reference" class="anchor"></a>API Reference</h2>
<p>You can refer to the <code>api_parameter_reference</code> dataset to see which which parameters are supported with each geocoder service. This dataset is displayed below.</p>
<p>Refer to <code><a href="../reference/api_parameter_reference.html">?api_parameter_reference</a></code> for more details and links to the API documentation for each geocoder service.</p>
<div id="htmlwidget-30e4409849e39179307f" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-30e4409849e39179307f">{"x":{"filter":"top","filterHTML":"<tr>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;census&quot;,&quot;geocodio&quot;,&quot;google&quot;,&quot;iq&quot;,&quot;osm&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;address&quot;,&quot;api_key&quot;,&quot;city&quot;,&quot;country&quot;,&quot;county&quot;,&quot;format&quot;,&quot;limit&quot;,&quot;postalcode&quot;,&quot;state&quot;,&quot;street&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;address&quot;,&quot;api_key&quot;,&quot;benchmark&quot;,&quot;city&quot;,&quot;country&quot;,&quot;county&quot;,&quot;format&quot;,&quot;key&quot;,&quot;limit&quot;,&quot;postal_code&quot;,&quot;postalcode&quot;,&quot;q&quot;,&quot;state&quot;,&quot;street&quot;,&quot;vintage&quot;,&quot;zip&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"logical\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;true&quot;,&quot;false&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["census","census","census","census","census","census","census","census","osm","osm","osm","osm","osm","osm","osm","osm","osm","iq","iq","iq","iq","iq","iq","iq","iq","iq","iq","geocodio","geocodio","geocodio","geocodio","geocodio","geocodio","geocodio","geocodio","google","google"],["format",null,null,"address","street","city","state","postalcode","format","limit","address","street","city","county","state","postalcode","country","api_key","format","limit","address","street","city","county","state","postalcode","country","api_key","limit","address","street","city","state","postalcode","country","api_key","address"],["format","benchmark","vintage","address","street","city","state","zip","format","limit","q","street","city","county","state","postalcode","country","key","format","limit","q","street","city","county","state","postalcode","country","api_key","limit","q","street","city","state","postal_code","country","key","address"],["json","Public_AR_Current","Current_Current",null,null,null,null,null,"json","1",null,null,null,null,null,null,null,null,"json","1",null,null,null,null,null,null,null,null,"1",null,null,null,null,null,null,null,null],[true,true,true,false,false,false,false,false,true,false,false,false,false,false,false,false,false,true,true,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,true,true]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>method<\/th>\n      <th>generic_name<\/th>\n      <th>api_name<\/th>\n      <th>default_value<\/th>\n      <th>required<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"lengthMenu":[5,8,12,37],"pageLength":12,"autoWidth":true,"order":[],"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://jessecambon.github.io">Jesse Cambon</a>, Christopher Belanger.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '2a4961d1f7b45ceee241419b8e8257d3',
    indexName: 'tidygeocoder',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
